#!/bin/bash
# Pre-commit hook para gerar content-data.js automaticamente
# Este script roda antes de cada commit

echo "ğŸ”„ Verificando mudanÃ§as em _content/..."

# Verifica se hÃ¡ arquivos modificados em _content/
if git diff --cached --name-only | grep -q "^_content/"; then
    echo "ğŸ“ Arquivos em _content/ foram modificados"
    echo "ğŸ”¨ Gerando content-data.js..."
    
    python3 build-content.py
    
    if [ $? -eq 0 ]; then
        echo "âœ… content-data.js gerado com sucesso"
        
        # Adiciona o arquivo gerado ao commit
        git add assets/js/content-data.js
        echo "ğŸ“¦ content-data.js adicionado ao commit"
    else
        echo "âŒ Erro ao gerar content-data.js"
        exit 1
    fi
else
    echo "â„¹ï¸  Nenhuma mudanÃ§a em _content/ detectada"
fi

echo "âœ¨ Pre-commit hook concluÃ­do"
